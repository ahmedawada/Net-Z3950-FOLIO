# Instructions from @Kateryna Senchenko

## 1. create upload definition
curl --location --request POST ‘{host}:{port}/data-import/uploadDefinitions’ \
--header ‘Content-Type: application/json’ \
--header ‘X-Okapi-Tenant: diku’ \
--header ‘X-Okapi-Token: {token}’ \
--data-raw ‘{
  “fileDefinitions”: [
  {
  	  “name”:“{fileName}”
  }
  ]
}’

## 2. upload file (take uploadDefinitionId and fileDefinitionId from the previous response)
curl --location --request POST ‘{host}:{port}/data-import/uploadDefinitions/{uploadDefinitionId}/files/{fileDefinitionId}’ \
--header ‘Content-Type: application/octet-stream’ \
--header ‘X-Okapi-Tenant: diku’ \
--header ‘X-Okapi-Token: {token}’ \
--data-binary ‘{pathToFile}’

## 3. process file
curl --location --request POST ‘{host}:{port}/data-import/uploadDefinitions/{uploadDefinitionId}/processFiles?defaultMapping=true’ \
--header ‘Content-Type: application/json’ \
--header ‘X-Okapi-Tenant: diku’ \
--header ‘X-Okapi-Token: {token}’ \
--data-raw ‘{
  “uploadDefinition”: {uploadDefinitionFromPreviousResponse},
  “jobProfileInfo”:{
    “id”:“22fafcc3-f582-493d-88b0-3c538480cd83”,
    “name”:“Create MARC Bibs”,
    “dataType”:“MARC”
  }
}’
